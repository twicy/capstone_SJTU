#!/bin/bash

set -Eeuo pipefail
set -x

usage() {
  echo "Usage: $0 (create|destroy|reset)"
}

if [ $# -ne 1 ]; then
  usage
  exit 1
fi


case $1 in
  "create")
    sudo mysql -u root -e "create database testdb";
    sudo mysql testdb < dong.sql;
    ;;

    "destroy")
    sudo mysql -u root -e "DROP DATABASE IF EXISTS testdb;";
    ;;


  "reset")
    sudo mysql -u root -e "DROP DATABASE IF EXISTS testdb;";
    sudo mysql -u root -e "create database testdb";
    sudo mysql testdb < dong.sql;
    ;;

  *)
    usage
    exit 1
    ;;
esac